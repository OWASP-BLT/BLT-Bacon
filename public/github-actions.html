<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GitHub Actions Integration for BACON - Automate blockchain rewards">
    <title>GitHub Actions - BACON</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="hero" style="min-height: 40vh;">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo"><a href="index.html" style="color: inherit; text-decoration: none;">ðŸ¥“ BACON</a></div>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="getting-started.html">Getting Started</a></li>
                    <li><a href="api-reference.html">API Reference</a></li>
                    <li><a href="bitcoin-integration.html">Bitcoin</a></li>
                    <li><a href="solana-integration.html">Solana</a></li>
                    <li><a href="https://github.com/OWASP-BLT/BLT-Bacon" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </nav>
        <div class="hero-content">
            <h1>GitHub Actions Integration</h1>
            <p class="tagline">Automate BACON Rewards with CI/CD</p>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container">
                <h2>Quick Setup</h2>
                
                <div class="integration-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Add Secrets to Repository</h3>
                            <p>Go to Settings â†’ Secrets and variables â†’ Actions, and add:</p>
                            <ul>
                                <li><code>BACON_PRIVATE_KEY</code>: Your wallet private key</li>
                                <li><code>BACON_TOKEN_MINT</code>: Token mint address (Solana) or token ID (Bitcoin)</li>
                                <li><code>BLOCKCHAIN_NETWORK</code>: Network to use (mainnet/testnet)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Create Workflow File</h3>
                            <p>Create <code>.github/workflows/bacon-rewards.yml</code></p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Configure Rewards</h3>
                            <p>Customize reward amounts based on your needs</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section section-alt">
            <div class="container">
                <h2>Example Workflows</h2>
                
                <div class="feature-detail">
                    <h3>Basic Issue and PR Rewards</h3>
                    <div class="code-block">
<pre>name: BACON Rewards

on:
  issues:
    types: [opened, closed]
  pull_request:
    types: [opened, closed]

jobs:
  reward:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Reward Contributor
        uses: OWASP-BLT/bacon-action@v1
        with:
          blockchain: 'solana'
          network: 'mainnet-beta'
          private-key: ${{ secrets.BACON_PRIVATE_KEY }}
          token-mint: ${{ secrets.BACON_TOKEN_MINT }}
          reward-issue-opened: 10
          reward-issue-closed: 5
          reward-pr-opened: 20
          reward-pr-merged: 50</pre>
                    </div>
                </div>

                <div class="feature-detail">
                    <h3>Advanced Rewards with Conditions</h3>
                    <div class="code-block">
<pre>name: BACON Advanced Rewards

on:
  pull_request:
    types: [closed]
  issues:
    types: [closed, labeled]

jobs:
  reward-pr:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - uses: OWASP-BLT/bacon-action@v1
        with:
          blockchain: 'bitcoin'
          network: 'mainnet'
          private-key: ${{ secrets.BACON_PRIVATE_KEY }}
          reward-amount: |
            ${{ github.event.pull_request.additions > 100 && 100 || 50 }}
          memo: "PR #${{ github.event.pull_request.number }} merged"

  reward-issue:
    if: contains(github.event.issue.labels.*.name, 'bug') && github.event.action == 'closed'
    runs-on: ubuntu-latest
    steps:
      - uses: OWASP-BLT/bacon-action@v1
        with:
          blockchain: 'solana'
          reward-amount: 75
          memo: "Bug fix for issue #${{ github.event.issue.number }}"</pre>
                    </div>
                </div>

                <div class="feature-detail">
                    <h3>Release Rewards</h3>
                    <div class="code-block">
<pre>name: Release Rewards

on:
  release:
    types: [published]

jobs:
  reward-contributors:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Get Contributors Since Last Release
        id: contributors
        run: |
          git log $(git describe --tags --abbrev=0 HEAD^)..HEAD --format="%ae" | sort -u > contributors.txt
          echo "contributors=$(cat contributors.txt | tr '\n' ',')" >> $GITHUB_OUTPUT

      - name: Reward All Contributors
        uses: OWASP-BLT/bacon-action@v1
        with:
          blockchain: 'solana'
          recipients: ${{ steps.contributors.outputs.contributors }}
          reward-amount: 200
          memo: "Release ${{ github.event.release.tag_name }} reward"</pre>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2>Action Configuration</h2>
                
                <div class="feature-detail">
                    <h3>Input Parameters</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                        <thead>
                            <tr style="background-color: var(--card-bg);">
                                <th style="padding: 0.75rem; text-align: left; border: 1px solid rgba(255, 107, 53, 0.2);">Parameter</th>
                                <th style="padding: 0.75rem; text-align: left; border: 1px solid rgba(255, 107, 53, 0.2);">Required</th>
                                <th style="padding: 0.75rem; text-align: left; border: 1px solid rgba(255, 107, 53, 0.2);">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);"><code>blockchain</code></td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Yes</td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Blockchain to use (bitcoin or solana)</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);"><code>network</code></td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Yes</td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Network (mainnet, testnet, devnet)</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);"><code>private-key</code></td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Yes</td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Wallet private key</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);"><code>reward-amount</code></td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">No</td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Custom reward amount</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);"><code>memo</code></td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">No</td>
                                <td style="padding: 0.75rem; border: 1px solid rgba(255, 107, 53, 0.2);">Transaction memo</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="feature-detail">
                    <h3>Output Variables</h3>
                    <div class="code-block">
<pre># Access outputs in subsequent steps
- name: Use Output
  run: |
    echo "Transaction ID: ${{ steps.reward.outputs.transaction-id }}"
    echo "Recipient: ${{ steps.reward.outputs.recipient }}"
    echo "Amount: ${{ steps.reward.outputs.amount }}"</pre>
                    </div>
                </div>
            </div>
        </section>

        <section class="section section-alt">
            <div class="container">
                <h2>Custom Scripts</h2>
                
                <div class="feature-detail">
                    <h3>Using Node.js Script</h3>
                    <div class="code-block">
<pre>name: Custom BACON Rewards

on:
  issues:
    types: [closed]

jobs:
  custom-reward:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install Dependencies
        run: npm install @blt-bacon/sdk
      
      - name: Run Custom Reward Script
        env:
          PRIVATE_KEY: ${{ secrets.BACON_PRIVATE_KEY }}
          TOKEN_MINT: ${{ secrets.BACON_TOKEN_MINT }}
        run: node .github/scripts/reward.js
</pre>
                    </div>
                    
                    <p>Create <code>.github/scripts/reward.js</code>:</p>
                    <div class="code-block">
<pre>const BaconSDK = require('@blt-bacon/sdk');

async function main() {
  const bacon = new BaconSDK({
    blockchain: 'solana',
    network: 'mainnet-beta',
    wallet: {
      privateKey: process.env.PRIVATE_KEY
    },
    token: {
      mint: process.env.TOKEN_MINT
    }
  });

  await bacon.initialize();

  // Custom logic
  const issueNumber = process.env.GITHUB_EVENT_PATH;
  const event = require(issueNumber);
  
  const labels = event.issue.labels.map(l => l.name);
  let reward = 10;
  
  if (labels.includes('critical')) reward = 200;
  else if (labels.includes('high')) reward = 100;
  else if (labels.includes('medium')) reward = 50;
  
  await bacon.reward(event.issue.user.login, reward);
  console.log(`Rewarded ${reward} BACON`);
}

main().catch(console.error);</pre>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2>Best Practices</h2>
                
                <div class="use-cases">
                    <div class="use-case">
                        <h3>ðŸ”’ Security</h3>
                        <ul>
                            <li>Always use GitHub Secrets for private keys</li>
                            <li>Use read-only tokens when possible</li>
                            <li>Implement rate limiting</li>
                            <li>Validate inputs and recipients</li>
                        </ul>
                    </div>
                    
                    <div class="use-case">
                        <h3>ðŸ’° Budget Management</h3>
                        <ul>
                            <li>Set maximum reward limits</li>
                            <li>Monitor treasury balance</li>
                            <li>Implement daily/monthly caps</li>
                            <li>Alert on low balance</li>
                        </ul>
                    </div>
                    
                    <div class="use-case">
                        <h3>ðŸŽ¯ Smart Targeting</h3>
                        <ul>
                            <li>Reward based on issue labels</li>
                            <li>Consider PR size and quality</li>
                            <li>Bonus for first-time contributors</li>
                            <li>Scale rewards with project maturity</li>
                        </ul>
                    </div>
                    
                    <div class="use-case">
                        <h3>ðŸ“Š Monitoring</h3>
                        <ul>
                            <li>Log all reward transactions</li>
                            <li>Track success/failure rates</li>
                            <li>Monitor blockchain fees</li>
                            <li>Generate periodic reports</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="section section-alt">
            <div class="container center">
                <h2>Ready to Automate?</h2>
                <p class="lead">Start using GitHub Actions for automated BACON rewards</p>
                <div class="cta-buttons">
                    <a href="getting-started.html" class="btn btn-primary">Get Started</a>
                    <a href="https://github.com/OWASP-BLT/BLT-Bacon/tree/main/examples" class="btn btn-secondary">View Examples</a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>BACON</h4>
                    <p>Blockchain Assisted Contribution Network</p>
                </div>
                <div class="footer-section">
                    <h4>Documentation</h4>
                    <ul>
                        <li><a href="getting-started.html">Getting Started</a></li>
                        <li><a href="api-reference.html">API Reference</a></li>
                        <li><a href="bitcoin-integration.html">Bitcoin</a></li>
                        <li><a href="solana-integration.html">Solana</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 OWASP BLT Project. Licensed under Apache 2.0.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
